---
# yaml-language-server: $schema=https://www.schemastore.org/kustomization.json
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
patches:
  - target:
      kind: HelmRelease
    patch: &label |- # language: yaml
      - op: add
        path: /metadata/labels
        value:
          kevinnitro/project: homelab
  - target:
      kind: Kustomization
      version: kustomize.toolkit.fluxcd.io/v1
    patch: *label
  - target:
      kind: Kustomization
      version: kustomize.config.k8s.io/v1beta1
    patch: |- # language: yaml
      - op: add
        path: /patches/-
        value: |- # language: yaml
          target:
            kind: HelmRelease
          patch: |- # language: yaml
            - op: add
              path: /metadata/labels
              value:
                kevinnitro/project: homelab
resources:
  - ./cert-manager/
  - ./cloudbeaver/
  - ./cloudflare-ddns/
  - ./cloudflare-tunnel/
  - ./cnpg/
  - ./files/
  - ./flux-system/
  - ./gateway-api/
  - ./glance/
  - ./istio/
  - ./keycloak/
  - ./mltb/
  - ./monitoring/
  - ./reloader/
